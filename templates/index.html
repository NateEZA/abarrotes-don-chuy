{% extends "base.html" %}
{% block titulo %}Inicio - Abarrotes Don Chuy{% endblock %}
{% block contenido %}
<div style="text-align: center; margin-bottom: 3rem;">
    <h1 style="color: #2c3e50; font-size: 2.5rem; margin-bottom: 1rem;">Bienvenido a Abarrotes Don Chuy</h1>
    <p style="color: #7f8c8d; font-size: 1.2rem;">Los mejores productos de Electronica al mejor precio</p>
</div>

{% if productos %}
<div class="cuadricula-productos">
    {% for producto in productos %}
    <div class="tarjeta-producto">
        <img src="{{ url_for('static', filename='uploads/' + producto.imagen) }}" alt="{{ producto.nombre }}" class="imagen-producto">
        <div class="info-producto">
            <h3 class="nombre-producto">{{ producto.nombre }}</h3>
            <div style="margin-bottom: 0.5rem;">
                {% set calif_promedio = producto.calificacion_promedio() %}
                {% for i in range(5) %}
                    <span style="color: {% if i < calif_promedio %}#f39c12{% else %}#e0e0e0{% endif %}; font-size: 1rem;">‚òÖ</span>
                {% endfor %}
                <span style="color: #7f8c8d; font-size: 0.9rem; margin-left: 0.25rem;">({{ producto.resenas|length }})</span>
            </div>
            <div class="precio-producto">${{ "%.2f"|format(producto.precio) }}</div>
            <p style="color: #7f8c8d; margin-bottom: 1rem; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                {{ producto.descripcion }}
            </p>
            <div style="margin-bottom: 0.75rem;">
                <span style="color: {% if producto.stock > 5 %}#27ae60{% elif producto.stock > 0 %}#f39c12{% else %}#e74c3c{% endif %}; font-size: 0.9rem;">
                    {% if producto.stock > 5 %}‚úì Disponible
                    {% elif producto.stock > 0 %}‚ö†Ô∏è Pocas unidades
                    {% else %}‚úó Agotado{% endif %}
                </span>
            </div>
            <a href="{{ url_for('detalle_producto', id_producto=producto.id) }}" class="btn btn-primario btn-bloque">Ver Detalles</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div style="background: white; padding: 3rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); text-align: center;">
    <div style="font-size: 4rem; margin-bottom: 1rem;">üì¶</div>
    <h2 style="color: #2c3e50; margin-bottom: 1rem;">No hay productos disponibles</h2>
    <p style="color: #7f8c8d;">Los productos aparecer√°n aqu√≠ cuando sean aprobados.</p>
</div>
{% endif %}
{% endblock %}